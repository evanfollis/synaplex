flowchart LR
    subgraph World["World Graph (Subscriptions + Runtime)"]
        direction LR
        A1["Agent A1\n(DNA + Lens + Manifold)"]
        A2["Agent A2\n(DNA + Lens + Manifold)"]
        A3["Agent A3\n(DNA + Lens + Manifold)"]
    end

    subgraph Stores["Stores"]
        MStore["ManifoldStore\n(opaque text)"]
        DStore["DeterministicStateStore"]
    end

    %% State links
    A1 -->|load/save manifold| MStore
    A2 -->|load/save manifold| MStore
    A3 -->|load/save manifold| MStore

    A1 -->|det_state| DStore
    A2 -->|det_state| DStore
    A3 -->|det_state| DStore

    %% Global signals (broadcast-ish)
    A1 -. GlobalSignal .-> A2
    A1 -. GlobalSignal .-> A3
    A2 -. GlobalSignal .-> A1
    A3 -. GlobalSignal .-> A1

    %% Projections (lens-conditioned requests)
    A2 -->|RequestShape| A1
    A1 -->|Projection\n(slice via A2 lens)| A2

    A3 -->|RequestShape| A1
    A1 -->|Projection\n(slice via A3 lens)| A3
