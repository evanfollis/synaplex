sequenceDiagram
    participant W as WorldRuntime
    participant A as AgentCell
    participant MS as ManifoldStore
    participant DS as DetStateStore
    participant D as DeterministicFn
    participant B1 as ScaffoldingBranch[style=explorer]
    participant B2 as ScaffoldingBranch[style=skeptic]
    participant CP as CheckpointMind

    W->>A: advance_tick(world_ctx)

    %% Load state
    A->>MS: load_latest_manifold(mind_id, world_id)
    MS-->>A: ManifoldEnvelope M0

    A->>DS: load_deterministic_state(agent_id, world_id)
    DS-->>A: det_state_t

    %% Deterministic / subconscious phase
    A->>D: deterministic_phase(det_state_t, data, DNA, guidance, projections)
    D-->>A: det_outputs, SubconsciousPacket, det_state_t+1

    %% Optional multi-branch scaffolding (conjecture)
    par Branch 1
        A->>B1: scaffolding_phase(M0, SubconsciousPacket, style="explorer")
        B1-->>A: scratch_1, outer_decision_1
    and Branch 2
        A->>B2: scaffolding_phase(M0, SubconsciousPacket, style="skeptic")
        B2-->>A: scratch_2, outer_decision_2
    end

    %% Checkpoint ritual (internal reconciliation / criticism)
    A->>CP: checkpoint(M0, [scratch_1, scratch_2])
    CP-->>A: manifold_text M1

    %% Persist state
    A->>MS: save_manifold(mind_id, world_id, M1)
    A->>DS: save_deterministic_state(agent_id, world_id, det_state_t+1)

    %% Emit outer surfaces
    A-->>W: EpisodeOutput(det_outputs, signals, projections)
